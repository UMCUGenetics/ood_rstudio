cluster: "ubec"

form:
  - source
  - r_version
  - bioc_version
  - bc_path
  - auto_accounts
  - bc_partition
  - bc_cpus
  #- bc_gpus
  - bc_mem
  - bc_scratch
  - bc_num_hours
  - bc_email_on_started

attributes:
  source:
    widget: "select"
    label: "Container source"
    options:
      - [
        'Rocker-project', 'rocker',
         data-hide-bioc-version: true
        ]
      - [
        'Bioconductor', 'bioconductor',
          data-hide-r-version: true
        ]
    value: "rocker"
    required: true
    display: true

  r_version:
    widget: "select"
    label: "R version"
    options:
      - [ "latest", "latest" ]
      - [ "4.5", "4.5" ]
      - [ "4.4", "4.4" ]
      - [ "4.3", "4.3" ]
      - [ "4.2", "4.2" ]
      - [ "4.1", "4.1" ]
      - [ "4.0", "4.0" ]
    value: "4.5"
    required: true

  bioc_version:
    widget: "select"
    label: "Bioconductor release"
    options:
      - [ "3.22 (R 4.5)", "3.22" ]
      - [ "3.21 (R 4.5)", "3.21" ]
      - [ "3.20 (R 4.4)", "3.20" ]
      - [ "3.19 (R 4.4)", "3.19" ]
      - [ "3.18 (R 4.3)", "3.18" ]
      - [ "3.17 (R 4.3)", "3.17" ]
    value: "3_22"
    required: true

  bc_path:
    widget: "path_selector"
    label: "Working directory"
    required: true
    directory: $TMPDIR
    show_files: false
    favorites:
      - /hpc
    help: |
      <small>Select a folder to start the server in. Additional R packages will be installed here in a subdirectory. The default is the non-persistent `$TMPDIR` directory, but this folder will be erased after the session. Therefore, it is <b>strongly</b> recommended to select a folder from the shared storage space (/hpc/...). <b>Do not</b> user your home folder because it does not have sufficient space available.</small>

  auto_accounts:
    label: "Compute group"

  bc_partition:
    widget: "hidden_field"
    label: "Node type"
    options:
      - [ "cpu", "cpu", data-hide-bc-gpus: true ]
      - [ "gpu", "gpu" ]

  bc_cpus:
    label: "Number of CPU's"
    widget: "number_field"
    required: true
    min: 1
    max: 48
    value: "1"
    help: |
      <small>Number of CPU cores to allocate</small>

  bc_gpus:
    label: "#GPUs (optional)"
    widget: "number_field"
    min: 1
    max: 2
    value: ""
    help: |
      <small>Number of GPUs to allocate</small>

  bc_mem:
    label: "Memory (GB) (optional)"
    widget: "number_field"
    required: true
    value: "10"
    min: "5"
    max: "1000"
    help: |
      <small>Amount of memory to allocate. (default is 10 GB)</small>

  bc_scratch:
    label: "Scratch disk space (GB) (optional)"
    widget: "number_field"
    required: true
    value: "50"
    min: "20"
    max: "2000"
    help: |
      <small>Amount of scratch disk space to allocate (default is 50 GB)</small>

  bc_num_hours:
    label: "Runtime (in hours)"
    required: true
    default: 2
